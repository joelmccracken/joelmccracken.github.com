<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Use Jekyll? You really should be using Octopress</title>
    <meta name="viewport" content="width=device-width">
    <meta name="description" content="Nebby about Tech">
    <link rel="canonical" href="http://joelmccracken.github.io/entries/octopress-is-pretty-sweet/">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/main.css">
</head>


    <body>

        <header class="site-header">
  <div class="wrap">
    <a class="site-title" href="/">Joel's Journal</a>
  </div>
</header>


        <div class="page-content">
            <div class="wrap">
                <div class="post">
                    <header class="post-header">
                        <h1>Use Jekyll? You really should be using Octopress</h1>
                        <p class="meta">Jan 26, 2013</p>
                    </header>

                    <article class="post-content">
                        <div class="preamble">
Do you use Jekyll? Are you interested in static publishing? Then
you should checkout Octopress, a project I personally ignored for too
long. It makes using Jekyll much better.
</div>

<p>Before I learned C, years ago, I was under the impression that it was
a hard language to learn. I wanted to learn more about computers, and
C++ seemed easier. Everyone said it was “a better C”, and it seemed
like the right way to go.</p>

<p>I quickly learned that my initial impression was wrong. You basically
need to understand C in order to be effective at all with C++.
So, I learned C, and life was good. Fortunately, I’ve never had to
really use C++ again since then.</p>

<p>I still often get first impressions wrong.
<a href="http://octopress.org/docs/blogging/">Octopress</a>
is a blogging framework for Jekyll. 
I have known about Octopress’ existence
for a long time. The thing is, I ignored it. I thought it just
wouldn’t be very useful to me.</p>

<p>My impression was that Octopress was designed primarily to act as a
styling framework. There are lots of Jekyll blogs around that have
the same Octopress style. Writing about creating an “x” plugin
for Octopress was popular for a time, and these almost all seemed to
be very display-related.</p>

<p>However, when I recently took the time to look it over again, I
noticed that Octopress includes much more than a styling solution. It
includes scripts that help with all sorts of things you need to do
with a Jekyll website. I was amazed at how much it contains. 
It even has solutions to some long-time
frustrations I have had with Jekyll.</p>

<p>The other thing that struck me was how flexibly Octopress could be
used. Octopress is 
distributed as a git repository, not as a library. All of its
code is really easy to customize to the specific needs of your application.
Although the Jekyll documentation is good, Octopress’ sample configuration
files are really much easier to comprehend than by referencing the Jekyll
wiki.
So, it was clear that Octopress would make it much easier to manage
your Jekyll website, not harder.</p>

<p>It was clear to me that I should adopt Octopress.</p>

<h2 id="adopting-octopress">Adopting Octopress</h2>

<p>So, how do we migrate an existing Jekyll blog to Octopress?</p>

<p>First, 
<a href="http://octopress.org/docs/setup/">follow the documentation</a>, 
to set up an Octopress blog
with a few of my own modifications:</p>

<pre><code> cd ~/Journal # the place where I currently store all of my 
              # journal stuff
 git clone git://github.com/imathis/octopress.git JournalOctopress

 cd JournalOctopress
 
 git remote rename origin imathis
 
 bundle install --binstubs # so I can skip the 'bundle exec'
                           # and I don't use rbenv, I use RVM

 bin/rake install # install default presentation files 

 bin/rake preview # start the server
</code></pre>

<p>After verifying that everything is working by visiting
<code>localhost:4000</code> in the browser, 
lets check out what Rakefile goodies we have:</p>

<pre><code>bash-3.2$ bin/rake -T
rake clean                     # Clean out caches: .pygments-cache, .gist-cache, .sass-cache
rake copydot[source,dest]      # copy dot files for deployment
rake deploy                    # Default deploy task
rake gen_deploy                # Generate website and deploy
rake generate                  # Generate jekyll site
rake install[theme]            # Initial setup for Octopress: copies the default theme into the path of Jekyll's generator.
rake integrate                 # Move all stashed posts back into the posts directory, ready for site generation.
rake isolate[filename]         # Move all other posts than the one currently being worked on to a temporary stash location (stash) so regenerating the site happens much more quickly.
rake list                      # list tasks
rake new_page[filename]        # Create a new page in source/(filename)/index.markdown
rake new_post[title]           # Begin a new post in source/_posts
rake preview                   # preview the site in a web browser
rake push                      # deploy public directory to github pages
rake rsync                     # Deploy website via rsync
rake set_root_dir[dir]         # Update configurations to support publishing to root or sub directory
rake setup_github_pages[repo]  # Set up _deploy folder and deploy branch for Github Pages deployment
rake update_source[theme]      # Move source to source.old, install source theme updates, replace source/_includes/navigation.html with source.old's navigation
rake update_style[theme]       # Move sass to sass.old, install sass theme updates, replace sass/custom with sass.old/custom
rake watch                     # Watch the site and regenerate when it changes
</code></pre>

<p>Ohhh, so many choices. The most interesting ones to me are:</p>

<pre><code>rake new_page[filename]        # Create a new page in source/(filename)/index.markdown
rake new_post[title]           # Begin a new post in source/_posts
...
rake preview                   # preview the site in a web browser
</code></pre>

<p>For me, I next started to write this very blog post:</p>

<pre><code>bin/rake new_post["Octopress is Pretty Sweet"]
</code></pre>

<p>This let me record my observations as they were happening.</p>

<p>Okay. Running <code>bin/rake preview</code> and visiting <code>localhost:4000</code> shows
the new blog post. Lets start migrating the old content over. I have
always hated the default Jekyll URLs, but because I was using Github
to compile Jekyll, there wasn’t a good way for me to change the URLs
that already existed. Migrating to Octopress (and also compiling the
entire site on my own machine) makes this really easy. I also wanted
to make sure the old links still directed to the current content.</p>

<p>A quick search revealed a Jekyll 
<a href="https://github.com/ts mango/jekyll_alias_generator">plugin</a>
that makes it trivial to set up redirects. The only thing that
remained was creating the redirect information that the alias
generator requires. This seems like it should be pretty easy to
automate, so I added a new task to the <code>Rakefile</code> provided by
Octopress:</p>

<pre><code>task :joel_copy_old_posts do |t|

  old_posts_dir = "../joelmccracken.github.com/_posts/*"
  new_posts_dir = "source/_posts/"

  Dir[old_posts_dir].grep(/markdown/).each do |post_file|
    post_filename = File.basename(post_file)
    parts = post_filename.match(/(\d+)-(\d+)-(\d+)-(.*)\.markdown/)
    year = parts[1].to_i
    month = parts[2].to_i
    day = parts[3].to_i
    alias_name_to_add = Date.new(year, month, day).strftime("/%Y/%m/%d/#{parts[4]}.html")

    new_filename = new_posts_dir+post_filename


    old_file = File.open(post_file, "r")
    new_file = File.open(new_filename, "w")

    old_file.lines do |line|
      if line =~ /^title/
        new_file.puts line
        new_file.puts "alias: #{alias_name_to_add}"
      else
        new_file.puts line
      end
    end
  end
end
</code></pre>

<p>Basically, this code just takes every post, generates an alias name,
adds the alias to the YAML frontmatter. So, it converts the YAML
frontmatter from an old post:</p>

<pre><code>---
status: published
layout: post
title: 'An Alternative to "I Am Not My Code"'
---
</code></pre>

<p>into this:</p>

<pre><code>---
status: published
layout: post
title: 'An Alternative to "I Am Not My Code"'
alias: /2012/12/24/an-alternative-to-i-am-not-my-code.html
---
</code></pre>

<p>Easy, and it works well. The code could be a bit better, but since I only
ever need to run it once, this level of sophistication is perfect.</p>

<p>The only thing left is to change the default theme. I found the
<a href="https://github.com/octopress-themes/venice">venice</a>
theme and installed it:</p>

<pre><code>git submodule add git://github.com/octopress-themes/venice.git .themes/venice
git add git add .themes/
git commit -m 'added venice theme'
bin/rake install[venice]
</code></pre>

<p>Hopefully, I will be changing the venice layout soon to something I
have personalized. 
This, also, seems easier with Octopress. Since its
themes are fairly complete, modifying them in the future looks easier
than starting from scratch.</p>

<p>Finally, deploying. I just followed 
<a href="http://octopress.org/docs/deploying/github/">the provided instructions</a>:</p>

<pre><code>bin/rake setup_github_pages # used 'git@github.com:joelmccracken/joelmccracken.github.com'
bin/rake generate
bin/rake deploy
</code></pre>

<p>Overall, my experience with Octopress has been very positive. So far, I
have not hit any problems. So, if you have been holding off because,
like me, you didn’t think it would be very useful, I suggest giving it
a try. It might surprise you how nice it is.</p>

                    </article>

                    <div id="disqus_thread"></div>
                    <script>
                     var disqus_shortname = 'joelmccracken'; // required: replace example with your forum shortname

                     var disqus_config = function () {
                         this.page.url = "http://joelmccracken.github.io/entries/octopress-is-pretty-sweet/";
                         this.page.identifier = "/entries/octopress-is-pretty-sweet";
                         this.page.title = "Use Jekyll? You really should be using Octopress";
                     };

                     (function() {  // REQUIRED CONFIGURATION VARIABLE: EDIT THE SHORTNAME BELOW
                         var d = document, s = d.createElement('script');

                         s.src = '//'+disqus_shortname+'.disqus.com/embed.js';  // IMPORTANT: Replace EXAMPLE with your forum shortname!
                         s.setAttribute('data-timestamp', +new Date());
                         (d.head || d.body).appendChild(s);
                     })();
                    </script>
                    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
                </div>
            </div>
        </div>

        <footer class="site-footer">

  <div class="wrap">

    <h2 class="footer-heading">Joel McCracken</h2>

    <div class="footer-col-1 column">
      <ul>
        <li><a href="mailto:mccracken.joel@gmail.com">mccracken.joel@gmail.com</a></li>
      </ul>
    </div>

    <div class="footer-col-2 column">
      <ul>
        <li>
          <a href="https://github.com/JoelMcCracken">
            <span class="icon github">
              <svg version="1.1" class="github-icon-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                 viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve">
                <path fill-rule="evenodd" clip-rule="evenodd" fill="#C2C2C2" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761
                c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32
                c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472
                c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037
                C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65
                c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261
                c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082
                c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129
                c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
              </svg>
            </span>
            <span class="username">JoelMcCracken</span>
          </a>
        </li>
        <li>
          <a href="https://twitter.com/JoelMcCracken">
            <span class="icon twitter">
              <svg version="1.1" class="twitter-icon-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                 viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve">
                <path fill="#C2C2C2" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809
                c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27
                c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767
                c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206
                C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271
                c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469
                c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/>
              </svg>
            </span>
            <span class="username">JoelMcCracken</span>
          </a>
        </li>
      </ul>
    </div>

    <!-- 
    <div class="footer-col-3 column">
      <p class="text">would like to add some rotating content down here</p>
    </div>
    -->
  </div>

</footer>


        <script type="text/javascript">
 var _gaq = _gaq || [];
 _gaq.push(['_setAccount', 'UA-7759066-1']);
 _gaq.push(['_trackPageview']);

 (function() {
   var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
   ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
   var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
 })();
</script>

    </body>
</html>
